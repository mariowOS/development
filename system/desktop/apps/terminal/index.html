<!DOCTYPE html>
<html lang="en">
<head>
    <title>Terminal</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        @font-face {
            font-family: 'Unifont Ex Mono';
            src: url('unifont-ex-mono.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Unifont Ex Mono', monospace !important;
            color: #fff;
        }

        html, body {
            height: 100%;
            background: #181818;
            overflow: hidden;
        }

        ::-webkit-scrollbar {
            display: none;
        }

        .terminal-app {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100vw;
            padding: 10px;
            gap: 8px;
        }

        #readonly {
            flex: 1 1 auto;
            padding: 10px;
            background: #181818;
            border-radius: 6px;
            border: 1px solid #333;
            overflow-y: auto;
            resize: none;
            user-select: none;
            font-size: 14px;
            pointer-events: none;
            color: #f2f2f2;
        }

        #userinput {
            flex: 0 0 50px;
            padding: 8px 10px;
            background: #181818;
            border: 1px solid #333;
            border-top: none;
            border-radius: 0 0 6px 6px;
            resize: none;
            font-size: 14px;
            color: #f2f2f2;
        }

        #userinput:focus {
            outline: none;
            border-color: #555;
        }
    </style>
</head>
<body>
    <div name="app" class="terminal-app">
        <div id="readonly">
            MariowOS [Version 0.07 Insider Preview] <br>
            (c) MariowOS Corporation. <br>All rights reserved.
        </div>
        <textarea id="userinput" placeholder="Type your commands here..."></textarea>
    </div>

    <script>
        const output = document.getElementById("readonly");
        const input = document.getElementById("userinput");

        // Command dictionary
        const commands = {
            help: () => {
                return `Available commands:<br>
                help - Show this help message<br>
                about - Information about MariowOS Terminal<br>
                clear - Clear the terminal screen<br>
                echo - Display a message<br>
                math - Perform a simple math operation<br>
                exit - Close the terminal`;
            },

            about: () => {
                return `MariowOS Terminal Version 0.07 Insider Preview<br>
                (c) MariowOS Corporation. All rights reserved.`;
            },

            clear: () => {
                output.innerHTML = "";
                return "";
            },

            echo: (args) => args.join(" "),

            math: (args) => {
                try {
                    const result = eval(args.join(" "));
                    return `Result: ${result}`;
                } catch {
                    return "Error: invalid math operation.";
                }
            },

            exit: () => {
                print("Closing terminal...");
                window.close();
                return "";
            }
        };

        // Handle Enter key
        input.addEventListener("keydown", (event) => {
            if (event.key === "Enter") {
                event.preventDefault();
                const line = input.value.trim();
                if (line === "") return;

                print(`> ${line}`);
                handleCommand(line);
                input.value = "";
            }
        });

        function handleCommand(line) {
            const parts = line.split(" ");
            const cmd = parts[0].toLowerCase();
            const args = parts.slice(1);

            if (commands[cmd]) {
                const result = commands[cmd](args);
                if (result !== "") print(result);
            } else {
                print(`Command not recognized: ${cmd}`);
            }
        }

        function print(text) {
            output.innerHTML += text + "<br>";
            output.scrollTop = output.scrollHeight;
        }
    </script>
</body>
</html>
